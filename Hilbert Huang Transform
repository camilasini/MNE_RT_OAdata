import matplotlib.pyplot as plt
import emd
#import mne
from scipy.io import loadmat
import numpy as np
from scipy import ndimage

path = r"C:\Users\Camila\OneDrive - Universidade Federal do Par√° - UFPA\Documentos\LABNEP\DATASET\cleaned"
file = r"0000101_ICA.set"

#raw = mne.io.read_raw_eeglab(f'{path}\{file}', preload=True) 
#type mne.io.eeglab.eeglab.RawEEGLAB
#raw._data para acessar 

sample_rate = 200

matdat = loadmat(f'{path}\{file}')
#type dict
#matdat['data']
matdat = matdat['data'].flatten()

imf = emd.sift.mask_sift(matdat, max_imfs=5)
emd.plotting.plot_imfs(imf[:sample_rate*5,:])

##estudar a mask sift
config = emd.sift.get_config('mask_sift')
config['max_imfs'] = 7
config['mask_freqs'] = 50/sample_rate
config['mask_amp_mode'] = 'ratio_sig'
config['imf_opts/sd_thresh'] = 0.05
imf = emd.sift.mask_sift(matdat, **config)

IP, IF, IA = emd.spectra.frequency_transform(imf, sample_rate, 'nht')
#instantaneous phase, frequency and amplitude of each
#estimate the instantaneous frequency statistics from it using the NHT

#qual o criterio p escolher os segundos?
seconds = 60
t = np.linspace(0, seconds, seconds*sample_rate)

